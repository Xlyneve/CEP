<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drug Calculators</title>
  <style>
    body {
      position: relative;
      margin: 0;
      padding: 40px;
      font-family: "fors", sans-serif;
      color: #000;
      overflow-x: hidden;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: url('2b.png') no-repeat center center fixed;
      background-size: cover;
      filter: blur(25px);
      z-index: -1;
    }
    @font-face {
      font-family: 'fors';
      src: url('fors.ttf') format('truetype');
    }
    header { text-align: center; margin-bottom: 30px; }
    h1 { margin: 0; }
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    .calculator {
  padding: 24px;
  border-radius: 28px;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow:
    0 8px 24px rgba(0,0,0,0.05),
    inset 0 1px 0 rgba(255,255,255,0.4);
  transition: all .25s ease;
  color: #000;
}
    .calculator:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow:
    0 18px 40px rgba(0,0,0,0.12),
    inset 0 1px 0 rgba(255,255,255,0.5);
}
    .box1{background:rgba(236,231,225,0.15);}
    .box2{background:rgba(219,212,206,0.15);}
    .box3{background:rgba(187,174,165,0.15);}
    .box4{background:rgba(224,215,214,0.15);}
    .box5{background:rgba(179,179,179,0.15);}
    .box6{background:rgba(234,225,239,0.15);}
    .box7{background:rgba(214,239,229,0.15);}
    label,input{display:block;margin-bottom:10px;}
    input[type="number"]{padding:6px;width:100%;box-sizing:border-box;}
    .result{margin-top:10px;font-weight:bold;}
    .note{font-size:.9em;color:#333;margin-top:8px;}
    .home-button{
      position:fixed;top:20px;left:20px;
      padding:8px 16px;font-size:18px;border-radius:12px;
      color:#333;text-decoration:none;
      background:rgba(255,255,255,0.25);
      border:1.5px solid rgba(255,255,255,0.6);
      box-shadow:0 4px 12px rgba(255,255,255,0.2);
      backdrop-filter:blur(10px);
      transition:all .3s;
      z-index:999;
    }
    .home-button:hover{
      background:rgba(255,255,255,0.4);
      transform:scale(1.05);
    }
	input[type="number"] {
  padding: 8px 12px;
  border-radius: 14px;
  border: none;
  background: rgba(255,255,255,0.5);
  backdrop-filter: blur(6px);
  font-size: 14px;
  outline: none;
  transition: all .2s ease;
}

input[type="number"]:focus {
  background: rgba(255,255,255,0.8);
  box-shadow: 0 0 0 2px rgba(255, 233, 168, 0.6);
}
    /* collapsible */
    .collapsible{
      cursor:pointer;
      background:rgba(255,255,255,0.25);
      border:1px solid rgba(255,255,255,0.4);
      border-radius:12px;
      padding:15px 20px;
      font-size:20px;
      margin-top:30px;
      text-align:center;
      font-weight:bold;
      backdrop-filter:blur(10px);
      transition:all .3s;
    }
    .collapsible:hover{background:rgba(255,255,255,0.4);}
    .collapsible-content{
      max-height:0;
      overflow:hidden;
      transition:max-height .5s ease-out;
    }
    .collapsible-content.open{
      max-height:2000px;
      transition:max-height .6s ease-in;
      margin-top:20px;
    }
	
	.ml-highlight {
  background: #cceaca;
  padding: 6px 12px;
  border-radius: 999px;
  font-weight: bold;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
.fent-line {
  margin-bottom: 10px;
}

.fent-line:last-child {
  margin-bottom: 0;
}

/* Make general calculators grid like main ones */
.general-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

/* Make accordion items behave like calculator cards */
.acc-item {
  border-radius: 18px;
  overflow: hidden;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.35);
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 28px rgba(31,38,135,0.10);
  height: fit-content;
}
/* Accordion list for calculators */
.accordion {
  display: grid;
  gap: 14px;
  margin-top: 20px;
}

.acc-item {
  border-radius: 18px;
  overflow: hidden;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.35);
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 28px rgba(31,38,135,0.10);
}

.acc-title {
  width: 100%;
  text-align: left;
  padding: 16px 18px;
  cursor: pointer;
  border: 0;
  background: rgba(255,255,255,0.18);
  color: #000;
  font-family: "fors", sans-serif;
  font-size: 18px;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.acc-title:hover {
  background: rgba(255,255,255,0.28);
}

.acc-chevron {
  font-size: 18px;
  opacity: 0.75;
}

.acc-panel {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.45s ease;
}

.acc-panel.open {
  max-height: 1200px; /* big enough for your forms */
}

.acc-inner {
  padding: 18px;
}

/* Optional: tighter inputs inside accordion */
.acc-inner label, .acc-inner input { margin-bottom: 10px; }


  </style>
</head>
<body>

<a class="home-button" href="home.html">Home</a>
<header><h1>Drug Calculators</h1></header>

<!-- ====== MAIN CALCULATORS ====== -->
<div class="calculator-grid">

  <div class="calculator box1">
    <h2>Paracetamol 120 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="p120Weight">
    <div class="result" id="p120Result">Dose: </div>
	
	<div class="note">
  <strong>How often:</strong> Give every <strong>4 hours</strong> if needed.<br>
  <strong>Max in 24 hours:</strong> up to <strong>5 doses</strong> for the first <strong>48 hours</strong>,
  then up to <strong>4 doses</strong> per day after that.<br>
  <strong>Important:</strong> Do not exceed <strong>4 g/day</strong> total.
</div>
<div class="note">
  <strong>If using both:</strong> You can stagger them â€” e.g. Paracetamol now, then Ibuprofen <strong>3 hours later</strong> if still uncomfortable.
  Keep Paracetamol â‰¥ <strong>4 hours apart</strong> and Ibuprofen â‰¥ <strong>6 hours apart</strong>, and donâ€™t exceed the daily max doses above.
</div>
  </div>

  <div class="calculator box2">
    <h2>Paracetamol 250 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="p250Weight">
    <div class="result" id="p250Result">Dose: </div>
	
	<div class="note">
  <strong>How often:</strong> Give every <strong>4 hours</strong> if needed.<br>
  <strong>Max in 24 hours:</strong> up to <strong>5 doses</strong> for the first <strong>48 hours</strong>,
  then up to <strong>4 doses</strong> per day after that.<br>
  <strong>Important:</strong> Do not exceed <strong>4 g/day</strong> total.
</div>
<div class="note">
  <strong>If using both:</strong> You can stagger them â€” e.g. Paracetamol now, then Ibuprofen <strong>3 hours later</strong> if still uncomfortable.
  Keep Paracetamol â‰¥ <strong>4 hours apart</strong> and Ibuprofen â‰¥ <strong>6 hours apart</strong>, and donâ€™t exceed the daily max doses above.
</div>
  </div>

  <!-- UPDATED: Redipred now 5 mg/mL + shows mg and mL -->
  <div class="calculator box3">
  <h2>Redipred (general) â€” stock 5 mg/mL</h2>
  <label>Weight (kg):</label>
  <input type="number" id="redipredWeight">
  <div class="result" id="redipredResult">Dose: </div>
</div>

<div class="calculator box3">
  <h2>Redipred for Croup â€” stock 5 mg/mL</h2>
  <label>Weight (kg):</label>
  <input type="number" id="redipredCroupWeight">
  <div class="result" id="redipredCroupResult">Dose: </div>

<div class="note">
  <strong>Croup dosing (NZ commonly used when dexamethasone not available):</strong><br>
  Prednisolone <strong>1 mg/kg</strong> orally. Often given <strong>once daily for 2 days</strong> if prednisolone is used.<br>
  <strong>Seek urgent review</strong> if stridor at rest, increased work of breathing, lethargy, or poor intake.
</div>
</div>

  <div class="calculator box4">
    <h2>Ibuprofen 100 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="ibuprofenWeight">
    <div class="result" id="ibuprofenResult">Dose: </div>
	<div class="note">
  <strong>How often:</strong> Give every <strong>6â€“8 hours</strong> if needed.<br>
  <strong>Max in 24 hours:</strong> <strong>3 doses</strong> total.<br>
  <strong>Tip:</strong> Avoid if dehydrated / vomiting a lot, or kidney problems (seek advice).
</div>
<div class="note">
  <strong>If using both:</strong> You can stagger them â€” e.g. Paracetamol now, then Ibuprofen <strong>3 hours later</strong> if still uncomfortable.
  Keep Paracetamol â‰¥ <strong>4 hours apart</strong> and Ibuprofen â‰¥ <strong>6 hours apart</strong>, and donâ€™t exceed the daily max doses above.
</div>
  </div>

  <div class="calculator box5">
  <h2>Fentanyl IV â€” 100 mcg / 2 mL</h2>

  <label>Weight (kg):</label>
  <input type="number" id="fentWeight" step="0.1">

  <label style="display:flex; gap:10px; align-items:center; margin-top:6px;">
    <input type="checkbox" id="fentSecondDose" style="width:auto; margin:0;">
    Second dose required (after 10 minutes if pain persists)
  </label>

  <div class="result" id="fentResult">Dose: </div>

  <div class="note">
    <strong>Guideline:</strong> 1.5 mcg/kg (min 21 mcg, max 100 mcg).<br>
    <strong>Second dose:</strong> 0.5 mcg/kg after 10 min if still significant pain.<br>
    <strong>Stock:</strong> 100 mcg/2 mL (50 mcg/mL).
  </div>
</div>

  <div class="calculator box6">
    <h2>Drug Formula</h2>
    <label>What you want:</label>
    <input type="number" id="want">
    <label>What you have:</label>
    <input type="number" id="have">
    <label>Volume of stock (mL):</label>
    <input type="number" id="volume">
    <div class="result" id="formulaResult">Result: </div>
  </div>



</div>

<div class="collapsible" id="toggleGeneral">ðŸ’Š General Drug Calculators â–¼</div>
<div class="collapsible-content" id="generalCalculators">

  <div class="general-grid">

    <!-- 1) Ordered mg per kg â†’ mL -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Ordered mg per kg â†’ mL
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Weight:</label>
          <div style="display:flex; gap:10px;">
            <input type="number" id="customWeight" step="0.1">
            <span>kg</span>
          </div>

          <label>Ordered dose:</label>
          <div style="display:flex; gap:10px;">
            <input type="number" id="orderedMg" placeholder="mg" step="0.1">
            <span>mg per</span>
            <input type="number" id="orderedKg" placeholder="kg" step="0.1">
            <span>kg</span>
          </div>

          <label>Formulation available:</label>
          <div style="display:flex; gap:10px;">
            <input type="number" id="stockMg" placeholder="mg" step="0.1">
            <span>mg per</span>
            <input type="number" id="stockMl" placeholder="mL" step="0.1">
            <span>mL</span>
          </div>

          <div class="result" id="customResult">Result:</div>
        </div>
      </div>
    </div>

    <!-- 2) Tablets & Capsules -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Tablets & Capsules
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Strength Required:</label>
          <input type="number" id="tabRequired">
          <label>Strength Available:</label>
          <input type="number" id="tabAvailable">
          <div class="result" id="tabResult">Result:</div>
        </div>
      </div>
    </div>

    <!-- 3) Liquid Medication -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Liquid Medication
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Strength Required:</label>
          <input type="number" id="liqRequired">
          <label>Strength Available:</label>
          <input type="number" id="liqAvailable">
          <label>Volume of Stock (mL):</label>
          <input type="number" id="liqStock">
          <div class="result" id="liqResult">Result:</div>
        </div>
      </div>
    </div>

    <!-- 4) Volume for Injection -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Volume for Injection
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Strength Required:</label>
          <input type="number" id="injRequired">
          <label>Strength Available:</label>
          <input type="number" id="injAvailable">
          <label>Volume of Stock (mL):</label>
          <input type="number" id="injStock">
          <div class="result" id="injResult">Result:</div>
        </div>
      </div>
    </div>

    <!-- 5) Infusion Flow Rate -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Infusion Flow Rate
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Total Volume (mL):</label>
          <input type="number" id="infuseVolume">
          <label>Hours to Infuse:</label>
          <input type="number" id="infuseHours">
          <div class="result" id="infuseResult">Result:</div>
        </div>
      </div>
    </div>

    <!-- 6) Drip Rate -->
    <div class="acc-item">
      <button class="acc-title" type="button">
        Drip Rate
        <span class="acc-chevron">â–¼</span>
      </button>
      <div class="acc-panel">
        <div class="acc-inner">
          <label>Total Fluid (mL):</label>
          <input type="number" id="dripVolume">
          <label>Set Calibration (drops/mL):</label>
          <input type="number" id="dripCalib">
          <label>Total Hours:</label>
          <input type="number" id="dripHours">
          <div class="result" id="dripResult">Result:</div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
/* collapsible toggle */
const toggleBtn = document.getElementById('toggleGeneral');
const content = document.getElementById('generalCalculators');
toggleBtn.addEventListener('click',()=>{
  content.classList.toggle('open');
  toggleBtn.innerHTML = content.classList.contains('open')
    ? 'ðŸ’Š General Drug Calculators â–²'
    : 'ðŸ’Š General Drug Calculators â–¼';
});

function id(i){ return document.getElementById(i); }
function safeDivide(a,b){ return b ? a/b : 0; }

/* ===== MAIN CALCULATORS ===== */

id('p120Weight').addEventListener('input',()=>{
  const w = +id('p120Weight').value;
id('p120Result').innerHTML =
  w ? 'Dose: <span class="ml-highlight">' +
      (w*15/120*5).toFixed(1) + ' mL</span>'
    : 'Dose: ';
});

id('p250Weight').addEventListener('input',()=>{
  const w = +id('p250Weight').value;
  id('p250Result').innerHTML =
  w ? 'Dose: <span class="ml-highlight">' +
      (w*15/250*5).toFixed(1) + ' mL</span>'
    : 'Dose: ';
});

/* ===== Redipred 5 mg/mL ===== */

const REDIPRED_STRENGTH_MG_PER_ML = 5;

// 1) General: 5 mg/kg using stock 5 mg/mL  (=> 1 mL/kg)
id('redipredWeight').addEventListener('input', () => {
  const w = +id('redipredWeight').value;
  if (!w) {
    id('redipredResult').innerText = 'Dose: ';
    return;
  }

  const mg = w * 5; // 5 mg/kg
  const ml = mg / REDIPRED_STRENGTH_MG_PER_ML;

  id('redipredResult').innerHTML =
  'Dose: ' + mg.toFixed(1) + ' mg (' +
  '<span class="ml-highlight">' + ml.toFixed(2) + ' mL</span>)';
});

// 2) Croup: 1 mg/kg using stock 5 mg/mL
id('redipredCroupWeight').addEventListener('input', () => {
  const w = +id('redipredCroupWeight').value;
  if (!w) {
    id('redipredCroupResult').innerText = 'Dose: ';
    return;
  }

  const mg = w * 1; // 1 mg/kg
  const ml = mg / REDIPRED_STRENGTH_MG_PER_ML;

  id('redipredCroupResult').innerHTML =
  'Dose: ' + mg.toFixed(1) + ' mg (' +
  '<span class="ml-highlight">' + ml.toFixed(2) + ' mL</span>)';
});

id('ibuprofenWeight').addEventListener('input', () => {
  const w = +id('ibuprofenWeight').value;

  if (!w){
    id('ibuprofenResult').innerText = 'Dose: ';
    return;
  }

  let dose = w * 6;
  if (dose > 400) dose = 400;

  const volume = (dose / 100) * 5;

  id('ibuprofenResult').innerHTML =
  'Dose: ' + dose.toFixed(0) + ' mg (' +
  '<span class="ml-highlight">' + volume.toFixed(1) + ' mL</span>)';
});

/* Fentanyl */
// ===== Fentanyl IV (100 mcg/2 mL => 50 mcg/mL) =====
const FENT_MCG_PER_ML = 50;

id('fentWeight').addEventListener('input', calcFentanyl);
id('fentSecondDose').addEventListener('change', calcFentanyl);

function clamp(val, min, max){
  return Math.min(Math.max(val, min), max);
}

function calcFentanyl(){
  const w = +id('fentWeight').value;
  const second = id('fentSecondDose').checked;

  if(!w){
    id('fentResult').innerText = 'Dose: ';
    return;
  }

  // First dose: 1.5 mcg/kg, min 21, max 100
  let dose1 = w * 1.5;
  dose1 = clamp(dose1, 21, 100);

  const ml1 = dose1 / FENT_MCG_PER_ML;

  if(!second){
    id('fentResult').innerHTML =
      'Dose 1: ' + dose1.toFixed(0) + ' mcg (' +
      '<span class="ml-highlight">' + ml1.toFixed(2) + ' mL</span>)';
    return;
  }

  // Second dose: 0.5 mcg/kg (no min/max stated in your bullet points)
  const dose2 = w * 0.5;
  const ml2 = dose2 / FENT_MCG_PER_ML;

  const totalMcg = dose1 + dose2;
  const totalMl = totalMcg / FENT_MCG_PER_ML;

  id('fentResult').innerHTML =
  '<div class="fent-line">Dose 1: ' + dose1.toFixed(0) + ' mcg (' +
  '<span class="ml-highlight">' + ml1.toFixed(2) + ' mL</span>)</div>' +

  '<div class="fent-line">Dose 2: ' + dose2.toFixed(0) + ' mcg (' +
  '<span class="ml-highlight">' + ml2.toFixed(2) + ' mL</span>)</div>' +

  '<div class="fent-line"><strong>Total:</strong> ' + totalMcg.toFixed(0) + ' mcg (' +
  '<span class="ml-highlight">' + totalMl.toFixed(2) + ' mL</span>)</div>';
}

/* Drug Formula */
['want','have','volume'].forEach(i=>id(i).addEventListener('input',calcFormula));
function calcFormula(){
  const w = +id('want').value;
  const h = +id('have').value;
  const v = +id('volume').value;

 id('formulaResult').innerHTML =
  (w && h && v)
    ? 'Result: <span class="ml-highlight">' +
      (w/h*v).toFixed(2) + ' mL</span>'
    : 'Result: ';
}

/* ===== GENERAL CALCULATORS ===== */

['tabRequired','tabAvailable'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('tabRequired').value;
  const a = +id('tabAvailable').value;

  id('tabResult').innerText =
    (r && a)
      ? 'Result: ' + (safeDivide(r,a)).toFixed(2)
      : 'Result:';
}));

['liqRequired','liqAvailable','liqStock'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('liqRequired').value;
  const a = +id('liqAvailable').value;
  const v = +id('liqStock').value;

  id('liqResult').innerHTML =
  (r && a && v)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(r,a)*v).toFixed(2) + ' mL</span>'
    : 'Result:';
}));

['injRequired','injAvailable','injStock'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('injRequired').value;
  const a = +id('injAvailable').value;
  const v = +id('injStock').value;

  id('injResult').innerHTML =
  (r && a && v)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(r,a)*v).toFixed(2) + ' mL</span>'
    : 'Result:';
}));

['infuseVolume','infuseHours'].forEach(i=>id(i).addEventListener('input',()=>{
  const vol = +id('infuseVolume').value;
  const hrs = +id('infuseHours').value;

  id('infuseResult').innerHTML =
  (vol && hrs)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(vol,hrs)).toFixed(2) + ' mL/hr</span>'
    : 'Result:';
}));

['dripVolume','dripCalib','dripHours'].forEach(i=>id(i).addEventListener('input',()=>{
  const v = +id('dripVolume').value;
  const c = +id('dripCalib').value;
  const h = +id('dripHours').value;

  id('dripResult').innerText =
    (v && c && h)
      ? 'Result: ' + (safeDivide(v*c,(h*60))).toFixed(2) + ' drops/min'
      : 'Result:';
}));

// âœ… Ordered mg per kg â†’ mL (custom formulation)
['customWeight','orderedMg','orderedKg','stockMg','stockMl']
  .forEach(i => id(i).addEventListener('input', calcCustomMgKg));

function calcCustomMgKg(){
  const weight = +id('customWeight').value;   // kg
  const orderedMg = +id('orderedMg').value;   // mg
  const orderedKg = +id('orderedKg').value;   // kg (denominator)
  const stockMg = +id('stockMg').value;       // mg
  const stockMl = +id('stockMl').value;       // mL

  if(!weight || !orderedMg || !orderedKg || !stockMg || !stockMl){
    id('customResult').innerText = 'Result:';
    return;
  }

  const mgPerKg = orderedMg / orderedKg;      // mg/kg ordered
  const totalMg = mgPerKg * weight;           // total mg required

  const mgPerMl = stockMg / stockMl;          // mg/mL available
  const mlToGive = totalMg / mgPerMl;         // mL required

  id('customResult').innerHTML =
    'Result: ' + totalMg.toFixed(1) + ' mg total (' +
    '<span class="ml-highlight">' + mlToGive.toFixed(2) + ' mL</span>)';
}

// Accordion behavior (inside General Calculators)
document.querySelectorAll('#generalCalculators .acc-title').forEach(btn => {
  btn.addEventListener('click', () => {
    const panel = btn.nextElementSibling;
    const chevron = btn.querySelector('.acc-chevron');

    panel.classList.toggle('open');
    const isOpen = panel.classList.contains('open');
    if (chevron) chevron.textContent = isOpen ? 'â–²' : 'â–¼';
  });
});
</script>

</body>
</html>
