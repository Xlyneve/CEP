<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drug Calculators</title>
  <style>
    body {
      position: relative;
      margin: 0;
      padding: 40px;
      font-family: "fors", sans-serif;
      color: #000;
      overflow-x: hidden;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: url('2b.png') no-repeat center center fixed;
      background-size: cover;
      filter: blur(25px);
      z-index: -1;
    }
    @font-face {
      font-family: 'fors';
      src: url('fors.ttf') format('truetype');
    }
    header { text-align: center; margin-bottom: 30px; }
    h1 { margin: 0; }
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    .calculator {
      padding: 20px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(31,38,135,0.1);
      transition: transform .2s, box-shadow .2s;
      color: #000;
    }
    .calculator:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 48px rgba(31,38,135,0.2);
    }
    .box1{background:rgba(236,231,225,0.15);}
    .box2{background:rgba(219,212,206,0.15);}
    .box3{background:rgba(187,174,165,0.15);}
    .box4{background:rgba(224,215,214,0.15);}
    .box5{background:rgba(179,179,179,0.15);}
    .box6{background:rgba(234,225,239,0.15);}
    .box7{background:rgba(214,239,229,0.15);}
    label,input{display:block;margin-bottom:10px;}
    input[type="number"]{padding:6px;width:100%;box-sizing:border-box;}
    .result{margin-top:10px;font-weight:bold;}
    .note{font-size:.9em;color:#333;margin-top:8px;}
    .home-button{
      position:fixed;top:20px;left:20px;
      padding:8px 16px;font-size:18px;border-radius:12px;
      color:#333;text-decoration:none;
      background:rgba(255,255,255,0.25);
      border:1.5px solid rgba(255,255,255,0.6);
      box-shadow:0 4px 12px rgba(255,255,255,0.2);
      backdrop-filter:blur(10px);
      transition:all .3s;
      z-index:999;
    }
    .home-button:hover{
      background:rgba(255,255,255,0.4);
      transform:scale(1.05);
    }
    /* collapsible */
    .collapsible{
      cursor:pointer;
      background:rgba(255,255,255,0.25);
      border:1px solid rgba(255,255,255,0.4);
      border-radius:12px;
      padding:15px 20px;
      font-size:20px;
      margin-top:30px;
      text-align:center;
      font-weight:bold;
      backdrop-filter:blur(10px);
      transition:all .3s;
    }
    .collapsible:hover{background:rgba(255,255,255,0.4);}
    .collapsible-content{
      max-height:0;
      overflow:hidden;
      transition:max-height .5s ease-out;
    }
    .collapsible-content.open{
      max-height:2000px;
      transition:max-height .6s ease-in;
      margin-top:20px;
    }
	
	.ml-highlight {
  background: #ffe9a8;
  padding: 3px 8px;
  border-radius: 8px;
  font-weight: bold;
  color: #000;
}
  </style>
</head>
<body>

<a class="home-button" href="home.html">Home</a>
<header><h1>Drug Calculators</h1></header>

<!-- ====== MAIN CALCULATORS ====== -->
<div class="calculator-grid">

  <div class="calculator box1">
    <h2>Paracetamol 120 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="p120Weight">
    <div class="result" id="p120Result">Dose: </div>
  </div>

  <div class="calculator box2">
    <h2>Paracetamol 250 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="p250Weight">
    <div class="result" id="p250Result">Dose: </div>
  </div>

  <!-- UPDATED: Redipred now 5 mg/mL + shows mg and mL -->
  <div class="calculator box3">
  <h2>Redipred (general) â€” stock 5 mg/mL</h2>
  <label>Weight (kg):</label>
  <input type="number" id="redipredWeight">
  <div class="result" id="redipredResult">Dose: </div>
</div>

<div class="calculator box3">
  <h2>Redipred for Croup â€” stock 5 mg/mL</h2>
  <label>Weight (kg):</label>
  <input type="number" id="redipredCroupWeight">
  <div class="result" id="redipredCroupResult">Dose: </div>
</div>

  <div class="calculator box4">
    <h2>Ibuprofen 100 mg/5 mL</h2>
    <label>Weight (kg):</label>
    <input type="number" id="ibuprofenWeight">
    <div class="result" id="ibuprofenResult">Dose: </div>
  </div>

  <div class="calculator box5">
    <h2>Fentanyl</h2>
    <label>Dose required (mcg):</label>
    <input type="number" id="fentDose">
    <label>Stock strength (mcg/mL):</label>
    <input type="number" id="fentStock">
    <div class="result" id="fentResult">Volume required: </div>
  </div>

  <div class="calculator box6">
    <h2>Drug Formula</h2>
    <label>What you want:</label>
    <input type="number" id="want">
    <label>What you have:</label>
    <input type="number" id="have">
    <label>Volume of stock (mL):</label>
    <input type="number" id="volume">
    <div class="result" id="formulaResult">Result: </div>
  </div>



</div>

<!-- ====== COLLAPSIBLE NEW CALCULATORS ====== -->
<div class="collapsible" id="toggleGeneral">ðŸ’Š General Drug Calculators â–¼</div>
<div class="collapsible-content" id="generalCalculators">
  <div class="calculator-grid">

<div class="calculator box7">
  <h2>Ordered mg per kg â†’ mL</h2>

  <label>Weight:</label>
  <div style="display:flex; gap:10px;">
    <input type="number" id="customWeight" step="0.1">
    <span>kg</span>
  </div>

  <label>Ordered dose:</label>
  <div style="display:flex; gap:10px;">
    <input type="number" id="orderedMg" placeholder="mg" step="0.1">
    <span>mg per</span>
    <input type="number" id="orderedKg" placeholder="kg" step="0.1">
    <span>kg</span>
  </div>

  <label>Formulation available:</label>
  <div style="display:flex; gap:10px;">
    <input type="number" id="stockMg" placeholder="mg" step="0.1">
    <span>mg per</span>
    <input type="number" id="stockMl" placeholder="mL" step="0.1">
    <span>mL</span>
  </div>

  <div class="result" id="customResult">Result:</div>
</div>

    <div class="calculator box7">
      <h2>Tablets & Capsules</h2>
      <label>Strength Required:</label>
      <input type="number" id="tabRequired">
      <label>Strength Available:</label>
      <input type="number" id="tabAvailable">
      <div class="result" id="tabResult">Result:</div>
    </div>

    <div class="calculator box7">
      <h2>Liquid Medication</h2>
      <label>Strength Required:</label>
      <input type="number" id="liqRequired">
      <label>Strength Available:</label>
      <input type="number" id="liqAvailable">
      <label>Volume of Stock (mL):</label>
      <input type="number" id="liqStock">
      <div class="result" id="liqResult">Result:</div>
    </div>

    <div class="calculator box7">
      <h2>Volume for Injection</h2>
      <label>Strength Required:</label>
      <input type="number" id="injRequired">
      <label>Strength Available:</label>
      <input type="number" id="injAvailable">
      <label>Volume of Stock (mL):</label>
      <input type="number" id="injStock">
      <div class="result" id="injResult">Result:</div>
    </div>

    <div class="calculator box7">
      <h2>Infusion Flow Rate</h2>
      <label>Total Volume (mL):</label>
      <input type="number" id="infuseVolume">
      <label>Hours to Infuse:</label>
      <input type="number" id="infuseHours">
      <div class="result" id="infuseResult">Result:</div>
    </div>

    <div class="calculator box7">
      <h2>Drip Rate</h2>
      <label>Total Fluid (mL):</label>
      <input type="number" id="dripVolume">
      <label>Set Calibration (drops/mL):</label>
      <input type="number" id="dripCalib">
      <label>Total Hours:</label>
      <input type="number" id="dripHours">
      <div class="result" id="dripResult">Result:</div>
    </div>

  </div>
</div>

<script>
/* collapsible toggle */
const toggleBtn = document.getElementById('toggleGeneral');
const content = document.getElementById('generalCalculators');
toggleBtn.addEventListener('click',()=>{
  content.classList.toggle('open');
  toggleBtn.innerHTML = content.classList.contains('open')
    ? 'ðŸ’Š General Drug Calculators â–²'
    : 'ðŸ’Š General Drug Calculators â–¼';
});

function id(i){ return document.getElementById(i); }
function safeDivide(a,b){ return b ? a/b : 0; }

/* ===== MAIN CALCULATORS ===== */

id('p120Weight').addEventListener('input',()=>{
  const w = +id('p120Weight').value;
id('p120Result').innerHTML =
  w ? 'Dose: <span class="ml-highlight">' +
      (w*15/120*5).toFixed(1) + ' mL</span>'
    : 'Dose: ';
});

id('p250Weight').addEventListener('input',()=>{
  const w = +id('p250Weight').value;
  id('p250Result').innerHTML =
  w ? 'Dose: <span class="ml-highlight">' +
      (w*15/250*5).toFixed(1) + ' mL</span>'
    : 'Dose: ';
});

/* ===== Redipred 5 mg/mL ===== */

const REDIPRED_STRENGTH_MG_PER_ML = 5;

// 1) General: 5 mg/kg using stock 5 mg/mL  (=> 1 mL/kg)
id('redipredWeight').addEventListener('input', () => {
  const w = +id('redipredWeight').value;
  if (!w) {
    id('redipredResult').innerText = 'Dose: ';
    return;
  }

  const mg = w * 5; // 5 mg/kg
  const ml = mg / REDIPRED_STRENGTH_MG_PER_ML;

  id('redipredResult').innerHTML =
  'Dose: ' + mg.toFixed(1) + ' mg (' +
  '<span class="ml-highlight">' + ml.toFixed(2) + ' mL</span>)';
});

// 2) Croup: 1 mg/kg using stock 5 mg/mL
id('redipredCroupWeight').addEventListener('input', () => {
  const w = +id('redipredCroupWeight').value;
  if (!w) {
    id('redipredCroupResult').innerText = 'Dose: ';
    return;
  }

  const mg = w * 1; // 1 mg/kg
  const ml = mg / REDIPRED_STRENGTH_MG_PER_ML;

  id('redipredCroupResult').innerHTML =
  'Dose: ' + mg.toFixed(1) + ' mg (' +
  '<span class="ml-highlight">' + ml.toFixed(2) + ' mL</span>)';
});

id('ibuprofenWeight').addEventListener('input', () => {
  const w = +id('ibuprofenWeight').value;

  if (!w){
    id('ibuprofenResult').innerText = 'Dose: ';
    return;
  }

  let dose = w * 6;
  if (dose > 400) dose = 400;

  const volume = (dose / 100) * 5;

  id('ibuprofenResult').innerHTML =
  'Dose: ' + dose.toFixed(0) + ' mg (' +
  '<span class="ml-highlight">' + volume.toFixed(1) + ' mL</span>)';
});

/* Fentanyl */
id('fentDose').addEventListener('input',calcFent);
id('fentStock').addEventListener('input',calcFent);
function calcFent(){
  const d = +id('fentDose').value;
  const s = +id('fentStock').value;

  id('fentResult').innerText =
    (d && s)
      ? 'Volume: ' + (d/s).toFixed(2) + ' mL'
      : 'Volume required: ';
}

/* Drug Formula */
['want','have','volume'].forEach(i=>id(i).addEventListener('input',calcFormula));
function calcFormula(){
  const w = +id('want').value;
  const h = +id('have').value;
  const v = +id('volume').value;

 id('formulaResult').innerHTML =
  (w && h && v)
    ? 'Result: <span class="ml-highlight">' +
      (w/h*v).toFixed(2) + ' mL</span>'
    : 'Result: ';
}

/* ===== GENERAL CALCULATORS ===== */

['tabRequired','tabAvailable'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('tabRequired').value;
  const a = +id('tabAvailable').value;

  id('tabResult').innerText =
    (r && a)
      ? 'Result: ' + (safeDivide(r,a)).toFixed(2)
      : 'Result:';
}));

['liqRequired','liqAvailable','liqStock'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('liqRequired').value;
  const a = +id('liqAvailable').value;
  const v = +id('liqStock').value;

  id('liqResult').innerHTML =
  (r && a && v)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(r,a)*v).toFixed(2) + ' mL</span>'
    : 'Result:';
}));

['injRequired','injAvailable','injStock'].forEach(i=>id(i).addEventListener('input',()=>{
  const r = +id('injRequired').value;
  const a = +id('injAvailable').value;
  const v = +id('injStock').value;

  id('injResult').innerHTML =
  (r && a && v)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(r,a)*v).toFixed(2) + ' mL</span>'
    : 'Result:';
}));

['infuseVolume','infuseHours'].forEach(i=>id(i).addEventListener('input',()=>{
  const vol = +id('infuseVolume').value;
  const hrs = +id('infuseHours').value;

  id('infuseResult').innerHTML =
  (vol && hrs)
    ? 'Result: <span class="ml-highlight">' +
      (safeDivide(vol,hrs)).toFixed(2) + ' mL/hr</span>'
    : 'Result:';
}));

['dripVolume','dripCalib','dripHours'].forEach(i=>id(i).addEventListener('input',()=>{
  const v = +id('dripVolume').value;
  const c = +id('dripCalib').value;
  const h = +id('dripHours').value;

  id('dripResult').innerText =
    (v && c && h)
      ? 'Result: ' + (safeDivide(v*c,(h*60))).toFixed(2) + ' drops/min'
      : 'Result:';
}));

// âœ… Ordered mg per kg â†’ mL (custom formulation)
['customWeight','orderedMg','orderedKg','stockMg','stockMl']
  .forEach(i => id(i).addEventListener('input', calcCustomMgKg));

function calcCustomMgKg(){
  const weight = +id('customWeight').value;   // kg
  const orderedMg = +id('orderedMg').value;   // mg
  const orderedKg = +id('orderedKg').value;   // kg (denominator)
  const stockMg = +id('stockMg').value;       // mg
  const stockMl = +id('stockMl').value;       // mL

  if(!weight || !orderedMg || !orderedKg || !stockMg || !stockMl){
    id('customResult').innerText = 'Result:';
    return;
  }

  const mgPerKg = orderedMg / orderedKg;      // mg/kg ordered
  const totalMg = mgPerKg * weight;           // total mg required

  const mgPerMl = stockMg / stockMl;          // mg/mL available
  const mlToGive = totalMg / mgPerMl;         // mL required

  id('customResult').innerHTML =
    'Result: ' + totalMg.toFixed(1) + ' mg total (' +
    '<span class="ml-highlight">' + mlToGive.toFixed(2) + ' mL</span>)';
}

</script>

</body>
</html>
