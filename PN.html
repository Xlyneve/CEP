<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nurse Notes</title>
  <style>
@font-face {
  font-family: 'fors';
  src: url('fors.ttf') format('truetype');
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Tahoma', sans-serif;
  overflow-x: hidden;
  position: relative;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

/* Background image with full-page blur overlay */
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: url('2b.png') no-repeat center center fixed;
  background-size: cover;
  filter: blur(10px) brightness(0.9);
  z-index: -1;
}

.note-content {
  font-family: 'Tahoma', sans-serif;
  font-size: 12px;
}

.header {
  position: fixed;
  top: 0;
  width: 100%;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  box-sizing: border-box;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
  z-index: 50;
  pointer-events: auto;
}

.header-left {
  position: absolute;
  top: 18px;
  left: 10px;
  z-index: 1001;
}

.header-left a.header-link,
.header a.header-link {
  padding: 6px 12px;
  font-size: 14px;
  font-weight: bold;
  background-color: rgba(189, 191, 218, 0.6);
  border-radius: 6px;
  border: 1px solid rgba(204, 186, 181, 0.6);
  color: black;
  text-decoration: none;
  white-space: nowrap;
  transition: background-color 0.3s ease;
  pointer-events: auto;
  position: relative;
  z-index: 1000;
}

.header-left a.header-link {
  padding: 4px 10px;
  font-size: 13px;
  background-color: rgba(189, 191, 218, 0.7);
  border: 1px solid rgba(204, 186, 181, 0.6);
  position: absolute;
  top: 3px;
  left: 10px;
  z-index: 1001;
}

.header a:hover,
.header-left a.header-link:hover {
  background-color: #b88eaa;
  color: #000;
}

.header-title {
  position: absolute;
  top: 10px;
  left: 80px;
  transform: none;
  font-size: 22px;
  font-weight: bold;
  color: #000;
  text-align: left;
  z-index: 60;
  pointer-events: auto;
  opacity: 0; /* Start hidden */
  animation: fadeIn 1.5s ease forwards; /* Trigger fade-in */
}

/* Add keyframes for fade-in */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}


a.header-link {
  position: relative;
  z-index: 1000;
  pointer-events: auto;
}

.search-box {
  z-index: 50;
  pointer-events: auto;
}

.search-box input {
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 4px;
  border: 1px solid #ccc;
  width: 150px; /* fixed width */
}

.container {
  background: none;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  padding: 100px 20px 20px 20px;
  position: relative;
  z-index: 40;
}

h2 {
  text-align: center;
  font-size: 20px;
}

.form-section {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 20px;
  position: relative;
  z-index: 40;
  align-items: flex-start;
  background: none;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border-radius: 0;
  padding: 0;
  box-shadow: none;
}

.form-section input[type="file"],
.form-section textarea {
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  color: #222;
  padding: 6px 8px;
  font-size: 12px;
  border-radius: 8px;
  box-sizing: border-box;
  font-family: 'fors', sans-serif;
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

#nurseTitle,
#nurseURL {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: none;
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.15);
  color: #222;
  padding: 6px 10px;
  font-size: 12px;
  border-radius: 8px;
  box-sizing: border-box;
  font-family: 'fors', sans-serif;
  transition: all 0.3s ease;
}

#nurseTitle:focus,
#nurseURL:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.4);
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
}

#nurseTitle {
  flex: 1 1 180px;
  height: 60px;
  min-width: 150px;
}

#nurseNote {
  flex: 2 1 280px;
  min-height: 60px;
  resize: vertical;
}

#nurseURL {
  flex: 1 1 180px;
  height: 60px;
  min-width: 150px;
}

#nurseImage {
  flex: 0 0 auto;
  height: 34px;
  padding: 4px 10px;
  cursor: pointer;
}

.cards-container {
  column-count: 4;
  column-gap: 15px;
  width: 100%;
  padding: 10px 0;
}

.note-card {
  display: inline-block;
  width: 90%;
  margin-bottom: 15px;
  break-inside: avoid;
  padding: 15px;
  border-radius: 12px;
  position: relative;
  word-wrap: break-word;
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease-in-out;
  border: 1px solid rgba(255, 255, 255, 0.4);
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(100, 100, 150, 0.15),
              0 0 10px rgba(255, 255, 255, 0.2);
}

.note-card .note-content,
.note-card .note-title {
  color: #000;
}

.note-card:hover {
  box-shadow:
    inset 0 3px 8px rgba(220 240 255 / 0.6),
    0 0 14px 5px rgba(220 240 255 / 0.45),
    0 8px 24px rgba(190 210 240 / 0.15);
  transform: translateY(-10px);
}

.edit-title {
  width: 93%;
  margin-bottom: 6px;
  padding: 6px 10px;
  font-family: Tahoma, sans-serif;
  font-size: 11px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.2);
  color: #222;
  transition: all 0.3s ease;
}

.note-title {
  font-weight: bold;
  font-size: 14px;
  margin-bottom: 6px;
}

.note-actions {
  margin-top: 12px;
  display: flex;
  justify-content: flex-end;
  gap: 6px;
}

.highlight {
  background-color: #f67a66;
}

.editor-buttons {
  display: flex;
  gap: 6px;
  margin-top: 6px;
}

button,
.note-actions button,
.editor-buttons button,
.header a.header-link {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.4);
  color: #111;
  padding: 6px 12px;
  font-size: 11px;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3),
              inset 0 0 10px rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
  user-select: none;
  text-align: center;
}

button:hover,
.note-actions button:hover,
.editor-buttons button:hover,
.header a.header-link:hover {
  background: rgba(255, 255, 255, 0.35);
  color: #000;
  box-shadow: 0 6px 20px rgba(255, 255, 255, 0.5),
              inset 0 0 12px rgba(255, 255, 255, 0.3);
}

button:active,
.note-actions button:active,
.editor-buttons button:active,
.header a.header-link:active,
button:focus,
.note-actions button:focus,
.editor-buttons button:focus,
.header a.header-link:focus {
  outline: none;
  background: rgba(255, 255, 255, 0.45);
  box-shadow: 0 8px 25px rgba(255, 255, 255, 0.6),
              inset 0 0 14px rgba(255, 255, 255, 0.4);
  color: #000;
}

.note-url {
  margin-top: 10px;
}

.note-url a {
  background-color: #FFF1F5;
  color: #333;
  text-decoration: none;
  padding: 3px 8px;
  border-radius: 5px;
  font-size: 11px;
  display: inline-block;
  transition: background-color 0.3s ease;
}

.note-url a:hover {
  background-color: #ddc6b2;
}

.note-url a .icon {
  margin-right: 6px;
}

.custom-file-btn {
  display: inline-block;
  padding: 6px 14px;
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(10px);
  border: 1.5px solid rgba(255, 255, 255, 0.8);
  border-radius: 8px;
  cursor: pointer;
  font-family: 'fors', sans-serif;
  font-size: 13px;
  color: #222;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.15);
  user-select: none;
  transition: all 0.3s ease;
  margin-left: 8px;
  vertical-align: middle;
}

.custom-file-btn:hover {
  background: rgba(255, 255, 255, 0.8);
  color: #000;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.25);
}

.add-btn {
  height: 34px;
  min-width: 100px;
  align-self: flex-start;
  padding: 6px 16px;
  background: rgba(255, 255, 255, 0.65);
  border: 1.5px solid rgba(255, 255, 255, 0.9);
  color: #111;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-left: 8px;
  vertical-align: middle;
}

.add-btn:hover {
  background: rgba(255, 255, 255, 0.9);
  color: #000;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3);
}

.hidden {
  display: none;
}

#toggleFormBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(90px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  font-size: 28px;
  font-weight: bold;
  color: #000;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.3s ease, transform 0.2s ease;
  z-index: 1000;
}

#toggleFormBtn:hover {
  background: rgba(255, 255, 255, 0.5);
  transform: scale(1.1);
}

#nurseFormWrapper {
  position: fixed;
  bottom: -100%;
  right: 20px;
  width: 300px;
  padding: 15px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  transition: bottom 0.4s ease, opacity 0.4s ease;
  opacity: 0;
  z-index: 999;
}

#nurseFormWrapper.show {
  bottom: 80px;
  opacity: 1;
}

/* üå∏ Toggle + Rays (updated) */
.center-toggle {
  position: fixed;
  top: 20px;
  left: 800px;
  width: 30px;
  height: 30px;
  z-index: 1002;
}
/* üå∏ Glassmorphism style for rays */
.center-toggle .ray {
  background: rgba(255, 255, 255, 1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 12px;
  padding: 6px 12px;
  color: #000;
  text-decoration: none !important;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s ease;
  font-weight: 500;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  transform: rotate(var(--angle)) translate(0px);
  transition: 
    opacity 0.4s ease, 
    transform 0.4s ease; /* smooth transition */
}

/* Show rays when active */
.center-toggle.active .ray {
  opacity: 1;
  pointer-events: auto;
}

/* Ray hover effect ‚Äî change box color */
.center-toggle .ray:hover {
  background: #ededed;
  transform: scale(1.05);
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.toggle-icon {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  color: #2d4d2d;
  cursor: pointer;
  transition: transform 0.4s ease;
}

.toggle-icon.active {
  transform: rotate(45deg);
}

.rays {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  pointer-events: auto;
  transform: translate(-50%, -50%);
  z-index: 1003;
}

.ray {
  position: absolute;
  top: 0;
  left: 0;
  font-size: 14px;
  font-weight: 400;
  color: #2f4f2f;
  opacity: 0;
  transform-origin: 0 0;
  white-space: nowrap;
  transform: rotate(var(--angle)) translate(40px);
  transition: opacity 0.5s ease;
  pointer-events: none;
}

.ray span {
  display: inline-block;
  transform: rotate(calc(-1 * var(--angle)));
  transition: color 0.3s ease;
}

/* Text color hover effect */
.ray:hover span {
  color: #F0EEEA;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .center-toggle {
    top: 15px;
    left: 10px;
    width: 50px;
    height: 50px;
  }
}



</style>
</head>
<body>

<div class="header">
  <div class="header-bg"></div>

  <div class="header-left">
    <!-- üå∏ Home toggle with rays -->
<div class="center-toggle">
  <div class="toggle-icon" id="menuToggle">‚òê</div>
  <div class="rays">
    <!-- Rays will be generated dynamically by JS -->
  </div>
</div>
</div>

  <h1 class="header-title">Nurse Notes</h1>

  <div class="header-right">
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="Search..." onkeyup="searchNotes(event)">
    </div>
  </div>
</div>

<div class="container">
  <!-- Hidden glassy form -->
  <div id="nurseFormWrapper" class="form-section">
    <input id="nurseTitle" placeholder="Title">
    <textarea id="nurseNote" placeholder="Note..."></textarea>
    <input id="nurseURL" placeholder="Optional URL (if any)">
    <input type="file" id="nurseImage" accept="image/*" style="display:none;" />
    <label for="nurseImage" class="custom-file-btn">Choose File</label>
    <button class="add-btn" onclick="addNote()">Add</button>
  </div>

  <!-- Notes container -->
  <div class="cards-container" id="nurseNotesList"></div>
</div>

<!-- Floating glassy + button -->
<button id="toggleFormBtn">+</button>

 

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import {
  getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, updateDoc
} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

/* ---------------- Firebase ---------------- */
const firebaseConfig = {
  apiKey: "AIzaSyAgYsVQNEOyQa41NkXXT2VuKClqXAxfG1Q",
  authDomain: "cepx-f9d2a.firebaseapp.com",
  projectId: "cepx-f9d2a",
  storageBucket: "cepx-f9d2a.appspot.com",
  messagingSenderId: "840696526325",
  appId: "1:840696526325:web:b9bcb4669fbfad066a1cbc"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const notesCol = collection(db, "nurseNotes");

/* ---------------- Global Filter Persistence ---------------- */
let currentSearchQuery = "";

/* ---------------- CRUD ---------------- */
async function addNote() {
  const title = nurseTitle.value.trim();
  const note = nurseNote.value.trim();
  const url = nurseURL.value.trim();
  const fileInput = document.getElementById('nurseImage');
  const file = fileInput.files[0];

  let imageBase64 = "";

  if (file) {
    const reader = new FileReader();
    reader.onloadend = async () => {
      imageBase64 = reader.result;

      await addDoc(notesCol, {
        title: title || "Untitled",
        note,
        url: url || "",
        image: imageBase64,
        time: new Date().toISOString()
      });

      nurseTitle.value = '';
      nurseNote.value = '';
      nurseURL.value = '';
      nurseImage.value = '';
    };
    reader.readAsDataURL(file);
  } else {
    await addDoc(notesCol, {
      title: title || "Untitled",
      note,
      url: url || "",
      image: "",
      time: new Date().toISOString()
    });

    nurseTitle.value = '';
    nurseNote.value = '';
    nurseURL.value = '';
    nurseImage.value = '';
  }
}

async function deleteNote(id) {
  if (confirm("Delete this note?")) {
    await deleteDoc(doc(db, "nurseNotes", id));
  }
}

async function saveEdit(id, updatedTitle, updatedNote) {
  await updateDoc(doc(db, "nurseNotes", id), {
    title: updatedTitle || "Untitled",
    note: updatedNote
  });
}

/* ---------------- Utilities ---------------- */
function escapeHtml(text) {
  return text.replace(/&/g, "&amp;")
             .replace(/</g, "&lt;")
             .replace(/>/g, "&gt;")
             .replace(/"/g, "&quot;")
             .replace(/'/g, "&#039;");
}

/* ---------------- Editing ---------------- */
function enableEditing(card, id, title, note) {
  card.innerHTML = `
    <input type="text" class="edit-title" value="${escapeHtml(title)}" />
    <div class="edit-note" contenteditable="true"
      style="width:95%; min-height:60px; padding:6px; border:1px solid rgba(255, 255, 255, 0.4);
             border-radius:8px; background:rgba(255,255,255,0.3); backdrop-filter:blur(8px);
             -webkit-backdrop-filter:blur(8px); font-family:Tahoma,sans-serif; font-size:11px;">
      ${note.replace(/\n/g, "<br>")}
    </div>
    <div class="editor-buttons" style="margin-top:6px;">
      <button class="btn-save">Save</button>
      <button class="btn-cancel">Cancel</button>
      <button class="btn-bold">Bold</button>
      <button class="btn-highlight">Highlight</button>
    </div>
  `;

  const inputTitle = card.querySelector('.edit-title');
  const editableDiv = card.querySelector('.edit-note');
  const btnSave = card.querySelector('.btn-save');
  const btnCancel = card.querySelector('.btn-cancel');
  const btnBold = card.querySelector('.btn-bold');
  const btnHighlight = card.querySelector('.btn-highlight');

  btnSave.addEventListener('click', async () => {
    const updatedTitle = inputTitle.value.trim() || "Untitled";
    const updatedNote = editableDiv.innerHTML.trim();
    await saveEdit(id, updatedTitle, updatedNote);
    renderNotes();
  });

  btnCancel.addEventListener('click', () => renderNotes());

  btnBold.addEventListener('click', () => document.execCommand('bold'));

  btnHighlight.addEventListener('click', () => {
    const selection = window.getSelection();
    if (selection.rangeCount > 0) {
      const range = selection.getRangeAt(0);
      const selectedText = selection.toString();
      if (!selectedText) return;

      const container = range.commonAncestorContainer;
      const parent = container.nodeType === 3 ? container.parentNode : container;

      if (parent.tagName === 'SPAN' && parent.style.backgroundColor === 'rgb(251, 224, 210)') {
        const textNode = document.createTextNode(parent.textContent);
        parent.replaceWith(textNode);
      } else {
        const span = document.createElement('span');
        span.style.backgroundColor = '#fbe0D2';
        span.textContent = selectedText;
        range.deleteContents();
        range.insertNode(span);
      }

      selection.removeAllRanges();
    }
  });
}

/* ---------------- Rendering ---------------- */
function renderNotes() {
  const list = document.getElementById('nurseNotesList');
  onSnapshot(notesCol, snapshot => {
    list.innerHTML = '';
    snapshot.forEach(docSnap => {
      const { title, note, time, url, image } = docSnap.data();
      const id = docSnap.id;

      const div = document.createElement('div');
      div.className = 'note-card';
      div.innerHTML = `
        <div class="note-title">${title}</div>
        <div class="note-content">${note.replace(/\n/g, '<br>')}</div>
        ${image ? `<img src="${image}" class="note-image" style="max-width:100%; margin-top:10px; border-radius:6px; cursor:pointer;" />` : ""}
        <div style="font-size:12px; margin-top:10px; color:#555;">${new Date(time).toLocaleString()}</div>
        ${url ? `<div class="note-url"><a href="${url}" target="_blank"><span class="icon">üîó</span>Open URL</a></div>` : ""}
        <div class="note-actions">
          <button class="edit-btn">Edit</button>
          <button class="delete-btn">Delete</button>
        </div>
      `;

      div.querySelector('.edit-btn').addEventListener('click', () => enableEditing(div, id, title, note));
      div.querySelector('.delete-btn').addEventListener('click', () => deleteNote(id));

      // üëá Add zoom function to image
      const img = div.querySelector('.note-image');
      if (img) {
        img.addEventListener('click', () => openImageZoom(img.src));
      }

      list.appendChild(div);
    });

    // üëá Reapply the current search filter after refresh
    if (currentSearchQuery.trim() !== "") {
      applySearchFilter(currentSearchQuery);
    }
  });
}

/* ---------------- Image Zoom ---------------- */
function openImageZoom(src) {
  // Create overlay
  const overlay = document.createElement('div');
  overlay.style.position = 'fixed';
  overlay.style.top = '0';
  overlay.style.left = '0';
  overlay.style.width = '100%';
  overlay.style.height = '100%';
  overlay.style.background = 'rgba(0, 0, 0, 0.8)';
  overlay.style.display = 'flex';
  overlay.style.alignItems = 'center';
  overlay.style.justifyContent = 'center';
  overlay.style.zIndex = '9999';
  overlay.style.cursor = 'zoom-out';
  overlay.addEventListener('click', () => document.body.removeChild(overlay));

  // Image
  const zoomedImg = document.createElement('img');
  zoomedImg.src = src;
  zoomedImg.style.maxWidth = '90%';
  zoomedImg.style.maxHeight = '90%';
  zoomedImg.style.borderRadius = '10px';
  zoomedImg.style.boxShadow = '0 0 20px rgba(255,255,255,0.2)';
  zoomedImg.style.transition = 'transform 0.3s ease';
  zoomedImg.addEventListener('click', e => e.stopPropagation());

  overlay.appendChild(zoomedImg);
  document.body.appendChild(overlay);
}

/* ---------------- Search / Filter ---------------- */
function applySearchFilter(query) {
  const cards = document.querySelectorAll('.note-card');
  query = query.toLowerCase();
  cards.forEach(card => {
    const title = card.querySelector('.note-title')?.textContent.toLowerCase() || '';
    const content = card.querySelector('.note-content')?.textContent.toLowerCase() || '';
    card.style.display = (title.includes(query) || content.includes(query)) ? 'block' : 'none';
  });
}

function searchNotes(event) {
  currentSearchQuery = event.target.value; // remember filter text
  applySearchFilter(currentSearchQuery);
}

/* ---------------- Setup ---------------- */
document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('keyup', searchNotes);
  }
});

window.addNote = addNote;
window.deleteNote = deleteNote;
window.saveEdit = saveEdit;
window.enableEditing = enableEditing;
window.renderNotes = renderNotes;
window.openImageZoom = openImageZoom;

// Initial load
renderNotes();

/* ---------------- Toggle Form + Rays (unchanged) ---------------- */
// keep your existing toggle & ray animation code here
  
 // Toggle form
const toggleBtn = document.getElementById('toggleFormBtn');
const nurseForm = document.getElementById('nurseFormWrapper');

toggleBtn.addEventListener('click', () => {
  nurseForm.classList.toggle('show');

  // Optional: change + to √ó when open
  toggleBtn.textContent = nurseForm.classList.contains('show') ? '√ó' : '+';
});

const centerToggle = document.querySelector('.center-toggle');
const toggleIcon = document.getElementById("menuToggle");
const raysContainer = centerToggle.querySelector(".rays");

let hoverTimeout;
let currentSet = 0; // tracks which set to show next

const raySets = [
  [
    { text: "Home", link: "https://xlyneve.github.io/CEP/home.html" },
    { text: "Info", link: "https://xlyneve.github.io/CEP/info.html" },
    { text: "Template", link: "https://xlyneve.github.io/CEP/explain.html" },
    { text: "PN", link: "https://xlyneve.github.io/CEP/practiceN.html" },
	{ text: "Recall", link: "https://xlyneve.github.io/CEP/recalls.html" }
  ],
  [
    { text: "Drug Calculator", link: "https://xlyneve.github.io/CEP/OHcalc.html" },
    { text: "Vaccine Calc", link: "https://xlyneve.github.io/CEP/vaccine-spacing.html" },
    { text: "Vaccines", link: "https://xlyneve.github.io/CEP/complete-vaccine-info.html" },
    { text: "Meds list", link: "https://xlyneve.github.io/CEP/Npres.html" }
  ]
];

const angles = ["-20deg","20deg","60deg","100deg","140deg","180deg"];

function showRays() {
  raysContainer.querySelectorAll('.ray').forEach(ray => {
    ray.style.opacity = 1;
    ray.style.pointerEvents = 'auto';
  });
}

function hideRays() {
  raysContainer.querySelectorAll('.ray').forEach(ray => {
    ray.style.opacity = 0;
    ray.style.pointerEvents = 'none';
  });
}

// Hover (optional) ‚Äî only show if no set active
centerToggle.addEventListener('mouseenter', () => {
  if (!toggleIcon.classList.contains("active")) {
    clearTimeout(hoverTimeout);
    showRays();
  }
});

centerToggle.addEventListener('mouseleave', () => {
  if (!toggleIcon.classList.contains("active")) {
    hoverTimeout = setTimeout(() => {
      hideRays();
    }, 1000);
  }
});

// Click rotates between sets
toggleIcon.addEventListener("click", () => {
  toggleIcon.classList.add("active");

  // Clear old rays
  raysContainer.innerHTML = "";

  // Add current set of rays
  const set = raySets[currentSet];
  set.forEach((rayData, i) => {
    const ray = document.createElement("a");
    ray.className = "ray";
    ray.href = rayData.link;
    ray.textContent = rayData.text;
    ray.style.opacity = "0";
    ray.style.setProperty("--angle", angles[i] || "0deg");
	ray.style.pointerEvents = "auto"; // Ensure clickable
    raysContainer.appendChild(ray);
	
    // Small timeout to trigger smooth transition
    setTimeout(() => {
      ray.style.opacity = "1";
      ray.style.transform = `rotate(${angles[i] || "0deg"}) translate(60px)`;
      ray.style.pointerEvents = "auto";
    }, 50); // 50ms delay triggers CSS transition
  });
  // Move to next set for next click
  currentSet = (currentSet + 1) % raySets.length;
});

// Function to hide rays
function hideAllRays() {
  const allRays = raysContainer.querySelectorAll(".ray");
  allRays.forEach(ray => {
    ray.style.opacity = "0";
    ray.style.pointerEvents = "none";
    ray.style.transform = `rotate(${ray.style.getPropertyValue("--angle")}) translate(0px)`;
  });
  toggleIcon.classList.remove("active");
}

// Close rays when clicking outside
document.addEventListener("click", (e) => {
  if (!centerToggle.contains(e.target)) {
    hideAllRays();
  }
});

</script>

</body>
</html>
